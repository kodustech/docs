---
title: "Installation"
description: "Deploy Kodus on a Generic Virtual Machine."
icon: "plug"
---

<Snippet file="deploy-basic-setup.mdx" />

## Environment Variables Configuration

Use this section to fill your `.env`. Start with the public URLs, then set up
databases and RabbitMQ, and finally add provider-specific settings.

### Namespace Configuration

These settings define the public URLs and host binding used by the web app and API.
If you are not using MCP Manager, you can skip the MCP entries here and the
full block below.

```env
WEB_HOSTNAME_API="kodus-api.yourdomain.com"    # Public API hostname (e.g., kodus-api.yourdomain.com)
NEXTAUTH_URL="https://kodus-web.yourdomain.com" # Full public base URL for the Web App (e.g., https://kodus-web.yourdomain.com)
API_HOST=0.0.0.0                              # API host (0.0.0.0 for local development)

# Only needed if you want to use MCP features.
API_KODUS_SERVICE_MCP_MANAGER=http://kodus-mcp-manager:3101 # MCP Manager URL
API_KODUS_MCP_SERVER_URL=http://kodus-api.yourdomain.com/mcp # Kodus MCP Server URL
```

### LLM Provider Configuration

```env
API_LLM_PROVIDER_MODEL="gpt-5"     # Model you want to use
API_OPENAI_FORCE_BASE_URL="https://your-api.com/v1"  # Your API provider URL
API_OPEN_AI_API_KEY="your-api-key"          # Your API provider key
```

Check our [model-specific guides](https://docs.kodus.io/cookbook/en) for detailed setup instructions with popular providers like Novita, OpenAI, Anthropic, and more.

### Database configuration

Use local containers for Postgres and MongoDB by default. Update credentials
to match your security requirements.

```env
# Use local containers for Postgres and MongoDB
USE_LOCAL_DB=true

# PostgreSQL Settings
API_DATABASE_ENV="development"                # development, production, test
API_PG_DB_HOST=db_kodus_postgres              # PostgreSQL host
API_PG_DB_PORT=5432                          # PostgreSQL port
API_PG_DB_USERNAME=kodusdev                  # Database username
API_PG_DB_PASSWORD=                          # Database password
API_PG_DB_DATABASE=kodus_db                  # Database name

# MongoDB Settings
API_MG_DB_HOST=db_kodus_mongodb              # MongoDB host
API_MG_DB_PORT=27017                         # MongoDB port
API_MG_DB_USERNAME=kodusdev                  # Database username
API_MG_DB_PASSWORD=                          # Database password
API_MG_DB_DATABASE=kodus                     # Database name
API_MG_DB_PRODUCTION_CONFIG=''               # Additional production settings
```

### RabbitMQ configuration

RabbitMQ is required in 2.0. Keep the URI in sync with the values below.

```env
# RabbitMQ Configuration
USE_LOCAL_RABBITMQ=true
RABBITMQ_HOSTNAME=rabbitmq                   # RabbitMQ hostname in Docker network
RABBITMQ_DEFAULT_USER=kodus                  # RabbitMQ user (change in production)
RABBITMQ_DEFAULT_PASS=kodus                  # RabbitMQ password (change in production)

# Keep the URI in sync with the user, password, and vhost above
API_RABBITMQ_URI=amqp://kodus:kodus@rabbitmq:5672/kodus-ai # RabbitMQ connection URI
API_RABBITMQ_ENABLED=true                    # RabbitMQ is required
```

### Git Provider Configuration

Choose and configure your preferred Git provider. You can set one or more
providers; for basic token-based authentication, you only need the webhook URL.

<Info>
  Webhooks are handled by a separate service (port 3332). Your webhook URLs must reach that service. You can use a dedicated webhooks domain, or keep the API domain and route `/.../webhook` paths to the webhooks service in your reverse proxy.
  Using GitHub or GitLab OAuth? See <a href="/how_to_deploy/en/platforms/github/github_oauth">GitHub OAuth App</a> or <a href="/how_to_deploy/en/platforms/gitlab/gitlab_oauth">GitLab OAuth App</a>. For GitHub App setup, see <a href="/how_to_deploy/en/platforms/github/github_app">GitHub App</a>.
</Info>

<Tabs>
  <Tab title="Github">
    ```env
    # Required for token-based authentication
    API_GITHUB_CODE_MANAGEMENT_WEBHOOK="https://kodus-api.yourdomain.com/github/webhook"          # Webhook URL (use webhooks domain, or API domain if proxied to webhooks service)
    ```

  </Tab>
  <Tab title="GitLab">
    ```env
    # Required for token-based authentication
    API_GITLAB_CODE_MANAGEMENT_WEBHOOK="https://kodus-api.yourdomain.com/gitlab/webhook"          # Webhook URL (use webhooks domain, or API domain if proxied to webhooks service)
    ```

  </Tab>
  <Tab title="Bitbucket">
    ```env
    # Required for token-based authentication
    GLOBAL_BITBUCKET_CODE_MANAGEMENT_WEBHOOK="https://kodus-api.yourdomain.com/bitbucket/webhook"    # Webhook URL (use webhooks domain, or API domain if proxied to webhooks service)
    ```

  </Tab>

  <Tab title="Azure DevOps">
    ```env
    # Required for token-based authentication
    GLOBAL_AZURE_REPOS_CODE_MANAGEMENT_WEBHOOK="https://kodus-api.yourdomain.com/azure-repos/webhook"    # Webhook URL (use webhooks domain, or API domain if proxied to webhooks service)
    ```

  </Tab>
</Tabs>

### MCP Manager Configuration

<Info>
  Only needed if you want to use MCP Manager.
</Info>

MCP Manager is the service that connects Kody to external tools and exposes
them in the Plugins screen. Check our [MCP Manager documentation](/how_to_deploy/en/deploy_kodus/mcp_manager)
for more information.

```env
API_MCP_SERVER_ENABLED=false # Change to true if you want to use MCP Manager
---
API_KODUS_SERVICE_MCP_MANAGER=http://kodus-mcp-manager:3101
API_KODUS_MCP_SERVER_URL=http://localhost:3001/mcp

# MCP Manager Configuration
API_MCP_MANAGER_LOG_LEVEL=info
API_MCP_MANAGER_PORT=3101
API_MCP_MANAGER_NODE_ENV=development
API_MCP_MANAGER_DATABASE_ENV=development
API_MCP_MANAGER_CORS_ORIGINS=*
API_MCP_MANAGER_JWT_SECRET=
API_MCP_MANAGER_COMPOSIO_BASE_URL=https://backend.composio.dev/api/v3
API_MCP_MANAGER_COMPOSIO_API_KEY=
API_MCP_MANAGER_MCP_PROVIDERS=kodusmcp,composio,custom
API_MCP_MANAGER_REDIRECT_URI=http://localhost:3000/setup/mcp/oauth
API_MCP_MANAGER_PG_DB_SCHEMA=mcp-manager
API_MCP_MANAGER_ENCRYPTION_SECRET=
```

### AST Code Review Configuration

<Info>
  Only needed if you want to enable AST-powered code review.
</Info>

The AST service parses, trims, and manipulates code files before they reach the review pipeline. This improves review quality and reduces token consumption. It is included in the installer and runs as a separate container.

```env
API_ENABLE_CODE_REVIEW_AST=false  # Set to true to enable AST-powered code review
API_SERVICE_AST_URL=              # Internal URL of the AST service
```

### External Services Configuration (Optional)

These services are optional but significantly improve Kodus's code review quality. Each requires you to create an account and generate an API key.

<AccordionGroup>
  <Accordion title="E2B — Code Execution Sandbox">
    E2B provides a secure sandbox that Kodus uses to run and validate code during reviews.

    1. Create an account at [e2b.dev](https://e2b.dev)
    2. Generate an API key in your dashboard
    3. Add it to your `.env`:

    ```env
    API_E2B_KEY=your-e2b-api-key
    ```
  </Accordion>

  <Accordion title="MorphLLM — Code Editing Model">
    MorphLLM is a specialized model for fast, accurate code editing. Kodus uses it to apply review suggestions more precisely.

    1. Create an account at [morphllm.com](https://morphllm.com)
    2. Generate an API key in your dashboard
    3. Add it to your `.env`:

    ```env
    API_MORPHLLM_API_KEY=your-morphllm-api-key
    ```
  </Accordion>
</AccordionGroup>

<Columns cols={2}>
  <Card
    title="Need help?"
    icon="headset"
    href="https://cal.com/gabrielmalinosqui/30min"
  >
    Schedule a call with our founder to get help with your deployment.
  </Card>

  <Card
    title="Get help with our community"
    icon="discord"
    href="https://discord.gg/TFZBRk9fT6"
  >
    Join our community to get help with your deployment.
  </Card>
</Columns>
